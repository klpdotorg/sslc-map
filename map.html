<!DOCTYPE html>
<html>
<head>
	  <meta charset='utf-8'/>
 <!--[if lte IE 8]>
     <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.ie.css" />
 <![endif]-->
  <script src='wax/ext/leaflet.js' type='text/javascript'></script>
  <script src='wax/dist/wax.leaf.js' type='text/javascript'></script>
  <link href='wax/ext/leaflet.css' rel='stylesheet' type='text/css' />  
  <link href='wax/theme/controls.css' rel='stylesheet' type='text/css' />

  
<script src="sslc.js" type="text/javascript"></script>
</head>
<div id="map" style="height:800px"></div>

<div class="wax-legend">  
<div class="legend-title">Karnataka SSLC Results</div>  
<div class="legend-scale">  
  <ul class="legend-labels">  
    <li><span style="background:#000;"></span>>80%</li>  
    <li><span style="background:#141a17;"></span></li>  
    <li><span style="background:#2a3731;"></span></li>  
    <li><span style="background:#40544b;"></span>>70%</li>  
   <li><span style="background:#b8c9c1;"></span></li>  
   <li><span style="background:#dfe6e3;"></span></li>     
   <li><span style="background:#f2f5f4;"></span>>50%</li>  
  </ul>  
</div>
<div class="legend-source"><a href="http://klp.org.in">Karnataka Learning Partnership</a></div> 
</div>
</div>

<script>

// var map = new L.Map('map');
var cloudmadeUrl = 'http://{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png',
        subDomains = ['otile1','otile2','otile3','otile4'],
        cloudmadeAttrib = '<a href="http://open.mapquest.co.uk" target="_blank">MapQuest</a>, <a href="http://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> and contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_blank">CC-BY-SA</a>';
var cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18, attribution: cloudmadeAttrib, subdomains: subDomains});
var tilejson = {
  tilejson: '1.0.0',
  scheme: 'xyz',
  tiles: ['http://tiles.klp.org.in/maps/sslc/{z}/{x}/{y}.png'],
  grids: ['http://tiles.klp.org.in/maps/sslc/{z}/{x}/{y}.grid.json'],
  formatter: function(options, data) {
  	pass_perc = (data['Total Pass']/data['Total Appe'])*100; 
  	return "<b class='district'>"+data['DISTSHP']+"</b>"+"<p class='percentage'>"+Math.round(pass_perc)+"%"+"<hr><p>Girls: "+data['Girls Pass']+" | Boys: "+data['Boys Passe']+"</p>" }
};
  var map = new L.Map('map')
    .addLayer(cloudmade)
    .addLayer(new wax.leaf.connector(tilejson))
    .setView(new L.LatLng(13, 77), 7);
  wax.leaf.interaction()
    .map(map)
    .tilejson(tilejson)
    .on(wax.tooltip().animate(true).parent(map._container).events());
</script>
</body>
</html>